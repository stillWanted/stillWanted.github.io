<!DOCTYPE html>
<html lang="fr">

	<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Protec Card Vente Privée">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="./focal.css">
	<link rel="icon" type="image/png" href="./img/pictohc192.png" />
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<title>Protec Card Vente Privée</title>
	</head>
	
	<body>
		<div id="nav_hearder">
			<img id="header_PTCLogo" src="./img/logo.png"/>
			<img id="header_VPLogo" src="./img/logo_vp.svg"/>
		</div>
		
		<div id="main">
		<div class="col">
		</div>
		<div id="content_main">
			<div class="content_product_item">
					<img id="check_logo" src="./img/check.svg"/>
					<img class="content_product_img" src="" />
			</div>
			<div class="content_cart_info clear">
				<span id="products_sum">49</span><span id="products_sum_price"> €</span>
				<ul id="products_name"></ul>
			</div>
			<div id='cgv'>
				<label><input type="checkbox" name="checkbox" value="check" id="agree" onclick="checkboxChecked()"/> J'accepte les termes et conditions</label> <a href="https://www.proteccard.com/pages/conditions-generales-de-vente" target="_blank">(?)</a>
			</div>
			<button id="checkout_button" onclick="actionHandler()">J'achète</button>
			</div>
			<div style="clear:both;" />
		</div>
		<div class="popup-wrapper" id="popup">
			<div class="popup-container">
				<div id='banniere_container'><img id='banniere' src='./img/banniere_popup2.png' /></div>
         <div class="ph-container">
		 	<p>Choisissez un second Protec Card et bénéficiez du tarif préférentiel de <strong>seulement 69€ (au lieu de 98€)</strong></p>
			<br/>
			<div class="ph-float">
				<a href='#choix' class='ph-button ph-btn-blue'>J'en profite !</a>
			</div> 
  
			<div class="ph-float">
				<a href='#' class='ph-button ph-btn-grey'>Non merci ... je n'en prends qu'un ...</a>
			</div>
			<div class="ph-clear"></div>   
				</div>
		</div>
		</div>
<div class="popup-wrapper" id="choix">
	<div class="popup-container">
 <div class="column" onclick="addSecondChoice('Pink')">
  <div class="focal-point right-1 down-1">
    <div><img src="img/illustration_pink.jpg" alt="pink"></div>
  </div>
  <div class="wrapper right">
	<div id="content">
		<div class='couleur'>
			<h2>Golden Pink</h2>
		</div>
		<div class='photo'>
			<img src="img/pink.png"></img>
		</div>
	</div>
  </div>
</div>

<div class="column" onclick="addSecondChoice('Blue')">
  <div class="focal-point left-2 up-2">
    <div><img src="img/illustration_blue.jpg" alt="blue"></div>
  </div>
    <div class="wrapper right">
	<div id="content">
		<div class='couleur'>
			<h2>Deep Blue</h2>
		</div>
		<div class='photo'>
			<img src="img/blue.png"></img>
		</div>
	</div>
  </div>
</div>

<div class="column" onclick="addSecondChoice('Silver')">
  <div class="focal-point right-1 down-1">
    <div><img src="img/illustration_silver.jpg" alt="silver"></div>
  </div>
    <div class="wrapper right">
	<div id="content">
		<div class='couleur'>
			<h2>Soft Silver</h2>
		</div>
		<div class='photo'>
			<img src="img/silver.png"></img>
		</div>
	</div>
  </div>
</div>
 
<div class="column" onclick="addSecondChoice('Champ')">
  <div class="focal-point right-3 down-1">
    <div><img src="img/illustration_champagne.jpg" alt="champ"></div>
  </div>
      <div class="wrapper left">
	<div id="content">
		<div class='couleur'>
			<h2>Champagne Bubble</h2>
		</div>
		<div class='photo'>
			<img src="img/champagne.png"></img>
		</div>
	</div>
  </div>
</div>

<div class="column">
		<div style="overflow: hidden;"><img id='logo' src="img/illustration_logo.png" alt="logo"></div>
</div>

<div class="column" onclick="addSecondChoice('Black')">
  <div class="focal-point up-1 right-6">
    <div><img src="img/illustration_black.jpg" alt="black"></div>
  </div>
    <div class="wrapper left">
	<div id="content">
		<div class='couleur'>
			<h2>Black Night</h2>
		</div>
		<div class='photo'>
			<img src="img/black.png"></img>
		</div>
	</div>
  </div>
</div>
<div style="clear:both"></div>
</div>
</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script>
		
			var action = 1
			
			
			function actionHandler(){
				if(action == 1){
					window.location.href = '#popup';
					$('#checkout_button').text('Je finalise ma commande');
					$('#checkout_button').addClass('ok');
					action = 2;
				}
				else {
					navigateToCheckOut();
				}
			}
			
			/* if(action == 1){			
					$('#checkout_button').addClass('glow');
			} */
			
			var chosenColour = 'Champ';
			var secondChoice = '';

			if($_GET("colour")!=null){
				chosenColour = $_GET("colour");
			}
			firstCardupdate();
			
			function checkboxChecked(){
				$('#cgv').removeClass('erreur');
			}
			
			function firstCardupdate(){
				var produitURL;
				var illustrationURL = '';
				switch(chosenColour){
					case 'Champ':
						produitURL = 'img/newchampagne.png'
						illustrationURL = 'img/illustration_champagne.jpg'
						var container = $('<div class="focal-point illu right-3 down-3"></div>')
						container.append("<div><img src='img/illustration_champagne.jpg' alt='champagne'></div>")
						container.appendTo($('.col'))
						break;
					case 'Pink':
						produitURL = 'img/newpink.png'
						illustrationURL = 'img/illustration_pink.jpg'
						var container = $('<div class="focal-point illu right-1 down-1"></div>')
						container.append("<div><img src='img/illustration_pink.jpg' alt='pink'></div>")
						container.appendTo($('.col'))
						break;
					case 'Blue':
						produitURL = 'img/newblue.png'
						illustrationURL = 'img/illustration_blue.jpg'
						var container = $('<div class="focal-point illu left-2 up-2"></div>')
						container.append("<div><img src='img/illustration_blue.jpg' alt='blue'></div>")
						container.appendTo($('.col'))
						break;
					case 'Black':
						produitURL = 'img/newblack.png'
						illustrationURL = 'img/illustration_black.jpg'
						var container = $('<div class="focal-point illu up-1 right-6"></div>')
						container.append("<div><img src='img/illustration_black.jpg' alt='black'></div>")
						container.appendTo($('.col'))
						break;
					case 'Silver':
						produitURL = 'img/newsilver.png'
						illustrationURL = 'img/illustration_silver.jpg'
						var container = $('<div class="focal-point illu right-1 down-1"></div>')
						container.append("<div><img src='img/illustration_silver.jpg' alt='silver'></div>")
						container.appendTo($('.col'))
						break;
				}
				productNamesUpdate(chosenColour)
				$('#main_picture').attr("src", illustrationURL)
				$('img.content_product_img').attr("src", produitURL)
			}
			
			function productNamesUpdate(colour){
				var text;
				switch(colour){
					case 'Champ':
						text = 'Champagne Bubble'
						break;
					case 'Pink':
						text = 'Golden Pink'
						break;
					case 'Blue':
						text = 'Deep Blue'
						break;
					case 'Black':
						text = 'Black Night'
						break;
					case 'Silver':
						text = 'Soft Silver'
						break;				
				}
				if($('#products_name li').length==2){
					$('#products_name li').eq(1).text(text)
				}
				else if($('#products_name li').length<=1){
					var elem = $('<li></li>')
					elem.text(text)
					$('#products_name').append(elem)
				}
			}
			
			function addSecondChoice(colour){
				if($('.content_product_img').length<=2){
					secondChoice = colour;
					console.log(secondChoice)
					var imgURL;
					switch(colour){
						case 'Champ':
							imgURL = 'img/newchampagne.png'
							break;
						case 'Pink':
							imgURL = 'img/newpink.png'
							break;
						case 'Blue':
							imgURL = 'img/newblue.png'
							break;
						case 'Black':
							imgURL = 'img/newblack.png'
							break;
						case 'Silver':
							imgURL = 'img/newsilver.png'
							break;
					}
					if($('.content_product_img').length==1){
						var item = $("<img class='content_product_img' style='display: none;'></img>")
						item.attr('src', imgURL)
						item.insertAfter($('.content_product_img'))
						item.fadeIn('slow');
					}
					else if($('.content_product_img').length==2){
						$('.content_product_img').eq(1).attr('src', imgURL)
					}
					$('#products_sum').text('69')
					productNamesUpdate(colour)
					$('.col').css('display','none');
					$('#content_main').addClass('full');
					$('#main').addClass('full')
					window.location.hash = ''
				}
			}
			
			function navigateToCheckOut(){
			if($('#agree').is(':checked')){
				var URL;
				if(secondChoice == ''){
					switch(chosenColour){
						case 'Champ':
							URL = "3877040881704:1";
							break;
						case 'Pink':
							URL = "3877040914472:1";
							break;
						case 'Blue':
							URL = "3877040947240:1";
							break;
						case 'Black':
							URL = "3877040914472:1"
							break;
						case 'Silver':
							URL = "8157373431905:1"
							break;
					}
				}
				else{
					switch(chosenColour + '&' + secondChoice){
						case 'Champ&Champ':
							URL = "8150845128801:1";
							break;
						case 'Pink&Champ':
						case 'Champ&Pink':
							URL = "8150845161569:1";
							break;
						case 'Blue&Champ':
						case 'Champ&Blue':
							URL = "8150845194337:1";
							break;
						case 'Black&Champ':
						case 'Champ&Black':
							URL = "8150845227105:1";
							break;
						case 'Silver&Champ':
						case 'Champ&Silver':
							URL = "8150845259873:1";
							break;
						case 'Pink&Pink':
							URL = "8150845292641:1";
							break;
						case 'Blue&Pink':
						case 'Pink&Blue':
							URL = "8150845325409:1";
							break;
						case 'Black&Pink':
						case 'Pink&Black':
							URL = "8150845358177:1";
							break;
						case 'Silver&Pink':
						case 'Pink&Silver':
							URL = "8150845390945:1";
							break;
						case 'Blue&Blue':
							URL = "8150845423713:1";
							break;
						case 'Black&Blue':
						case 'Blue&Black':
							URL = "8150845456481:1";
							break;
						case 'Silver&Blue':
						case 'Blue&Silver':
							URL = "8150845489249:1";
							break;
						case 'Black&Black':
							URL = "8150845522017:1";
							break;
						case 'Silver&Black':
						case 'Black&Silver':
							URL = "8150845554785:1";
							break;
						case 'Silver&Silver':
							URL = "8150845587553:1";
							break;
					}
				}
				window.location.href = 'https://www.proteccard.com/cart/'+URL;
				}
				else{
					$('#cgv').addClass('erreur');
				}
			}
			
			function $_GET(param) {
				var vars = {};
				window.location.href.replace( location.hash, '' ).replace( 
					/[?&]+([^=&]+)=?([^&]*)?/gi,
					function( m, key, value ) { 
						vars[key] = value !== undefined ? value : '';
					}
				);

				if ( param ) {
					return vars[param] ? vars[param].replace('#','') : null;	
				}
				return vars;
			}
			
		</script>
	</body>
	
</html>