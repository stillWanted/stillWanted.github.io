<!DOCTYPE html>
<html lang="fr">

	<head>
		<meta charset="utf-8">
		<meta name="description" content="Protec Card Vente Privée">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<link rel="stylesheet" href="./style.css">
		<link rel="icon" type="image/png" href="./img/pictohc192.png" />
		<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
		
		<title>Protec Card Vente Privée</title>
		
	</head>
	<body>

		<div id="nav_hearder">
			<img id="header_PTCLogo" src="./img/logo.png"/>
			<img id="header_VPLogo" src="./img/logo_vp.svg"/>
		</div>
		
		<div id="main">
		<div id="content_aside">
			<div id="content_wrapper">
			<div class="content_product_item">
					<span class="checkmark">
						<div class="checkmark_circle"></div>
						<div class="checkmark_stem"></div>
						<div class="checkmark_kick"></div>
					</span>
					<img class="content_product_img" src="" />
			</div>
			<div class="content_cart_info">
				<span id="products_sum">49</span><span id="products_sum_price"> €</span>
				<ul id="products_name"></ul>
			</div>
			</div>
				<button id="checkout_button" onclick="actionHandler()">J'achète</button>
		</div>
		
		<div id="content_main">
				<h3>Ajoutez un deuxième Protec Card et bénéficiez d'un tarif préférentiel de 69€</h3>
				<div class="row">
					<div class="tooltip column champ" onclick="addSecondChoice('Champ')">
						<span class="icon icon-plus"></span>
						<span class="tooltiptext">Champagne Bubble</span>
					</div>
					<div class="tooltip column pink" onclick="addSecondChoice('Pink')">
						<span class="icon icon-plus"></span>
						<span class="tooltiptext">Golden Pink</span>
					</div>
					<div class="tooltip column black" onclick="addSecondChoice('Black')">
						<span class="icon icon-plus"></span>
						<span class="tooltiptext">Black Night</span>
					</div>
					<div class="tooltip column silver" onclick="addSecondChoice('Silver')">
						<span class="icon icon-plus"></span>
						<span class="tooltiptext">Silver</span>
					</div>
					<div class="tooltip column blue" onclick="addSecondChoice('Blue')">
						<span class="icon icon-plus"></span>
						<span class="tooltiptext">Deep Blue</span>
					</div>
				</div>
		</div>
		</div>
		
		        <div class="modal blur-effect" id="popup">
            <div class="popup-content">
                <h3>Inscription News</h3>
                <div>
                    <p class="para">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    <input type="text" placeholder="Adresse email" />
                    <input type="submit" class="submit" value="je m'inscris" />
                     
                    <div class="close"></div>
                </div>
            </div>
        </div>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script>
		
			var action = 1
			
			function actionHandler(){
				if(action == 1){
					window.location.href = '#popup';
					action = 2;
				}
				else {
					navigateToCheckOut();
				}
			}
			
			var chosenColour = 'Champ';
			var secondChoice = '';
			
			if($_GET("colour")!=null){
				chosenColour = $_GET("colour");
			}
			firstCardupdate();
			
			function firstCardupdate(){
				var imgURL;
				switch(chosenColour){
					case 'Champ':
						imgURL = 'img/champagne.png'
						break;
					case 'Pink':
						imgURL = 'img/pink.png'
						break;
					case 'Blue':
						imgURL = 'img/blue.png'
						break;
					case 'Black':
						imgURL = 'img/black.png'
						break;
					case 'Silver':
						imgURL = 'img/silver.png'
						break;
				}
				productNamesUpdate(chosenColour)
				$('img.content_product_img').attr("src", imgURL)
			}
			
			function productNamesUpdate(colour){
				var text;
				switch(colour){
					case 'Champ':
						text = 'Champagne Bubble'
						break;
					case 'Pink':
						text = 'Golden Pink'
						break;
					case 'Blue':
						text = 'Deep Blue'
						break;
					case 'Black':
						text = 'Black Night'
						break;
					case 'Silver':
						text = 'Soft Silver'
						break;				
				}
				if($('#products_name li').length==2){
					$('#products_name li').eq(1).text(text)
				}
				else if($('#products_name li').length<=1){
					var elem = $('<li></li>')
					elem.text(text)
					$('#products_name').append(elem)
				}
			}
			
			function addSecondChoice(colour){
				if($('.content_product_img').length<=2){
					secondChoice = colour;
					console.log(secondChoice)
					var imgURL;
					switch(colour){
						case 'Champ':
							imgURL = 'img/champagne.png'
							break;
						case 'Pink':
							imgURL = 'img/pink.png'
							break;
						case 'Blue':
							imgURL = 'img/blue.png'
							break;
						case 'Black':
							imgURL = 'img/black.png'
							break;
						case 'Silver':
							imgURL = 'img/silver.png'
							break;
					}
					if($('.content_product_img').length==1){
						var div = $("<div class='img-wrap'><span class='close'>&times;</span></div>")
						var item = $("<img class='content_product_img' style='display: none;'></img>")
						item.attr('src', imgURL)
						item.appendTo(div)
						div.insertAfter(".content_product_img")
						$('.img-wrap .close').click(function() {
							deleteSecondChoice();
						});
						item.fadeIn('slow');
					}
					else if($('.content_product_img').length==2){
						$('.content_product_img').eq(1).attr('src', imgURL)
					}
					$('#products_sum').text('69')
					productNamesUpdate(colour)
					$(".content_cart_info").addClass("clear")
				}
			}
			
			function deleteSecondChoice(){
				if($('.content_product_img').length==2){
					$('.img-wrap').remove()
					$('#products_name li').eq(1).remove()
					$('#products_sum').text('49')
					$(".content_cart_info").removeClass("clear")
					secondChoice = ''
				}
			}
			
			function navigateToCheckOut(){
				var URL;
				if(secondChoice == ''){
					switch(chosenColour){
						case 'Champ':
							URL = "3877040881704:1";
							break;
						case 'Pink':
							URL = "3877040914472:1";
							break;
						case 'Blue':
							URL = "3877040947240:1";
							break;
						case 'Black':
							URL = "3877040914472:1"
							break;
						case 'Silver':
							URL = "8157373431905:1"
							break;
					}
				}
				else{
					switch(chosenColour + '&' + secondChoice){
						case 'Champ&Champ':
							URL = "8150845128801:1";
							break;
						case 'Pink&Champ':
						case 'Champ&Pink':
							URL = "8150845161569:1";
							break;
						case 'Blue&Champ':
						case 'Champ&Blue':
							URL = "8150845194337:1";
							break;
						case 'Black&Champ':
						case 'Champ&Black':
							URL = "8150845227105:1";
							break;
						case 'Silver&Champ':
						case 'Champ&Silver':
							URL = "8150845259873:1";
							break;
						case 'Pink&Pink':
							URL = "8150845292641:1";
							break;
						case 'Blue&Pink':
						case 'Pink&Blue':
							URL = "8150845325409:1";
							break;
						case 'Black&Pink':
						case 'Pink&Black':
							URL = "8150845358177:1";
							break;
						case 'Silver&Pink':
						case 'Pink&Silver':
							URL = "8150845390945:1";
							break;
						case 'Blue&Blue':
							URL = "8150845423713:1";
							break;
						case 'Black&Blue':
						case 'Blue&Black':
							URL = "8150845456481:1";
							break;
						case 'Silver&Blue':
						case 'Blue&Silver':
							URL = "8150845489249:1";
							break;
						case 'Black&Black':
							URL = "8150845522017:1";
							break;
						case 'Silver&Black':
						case 'Black&Silver':
							URL = "8150845554785:1";
							break;
						case 'Silver&Silver':
							URL = "8150845587553:1";
							break;
					}
				}
				window.location.href = 'https://www.proteccard.com/cart/'+URL;
			}
			
			function $_GET(param) {
				var vars = {};
				window.location.href.replace( location.hash, '' ).replace( 
					/[?&]+([^=&]+)=?([^&]*)?/gi,
					function( m, key, value ) { 
						vars[key] = value !== undefined ? value : '';
					}
				);

				if ( param ) {
					return vars[param] ? vars[param] : null;	
				}
				return vars;
			}
			
		</script>
	</body>
	
</html>